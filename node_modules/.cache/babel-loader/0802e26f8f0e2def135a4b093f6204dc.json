{"ast":null,"code":"import _slicedToArray from\"/home/andreyna/moreira-Andreyna-Carvalho/modulo3/projeto-labex/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";import{urlViagem}from\"../../components/url/urls\";import{Container,ContainerCard}from\"../allTrip/AllTripStyled\";import{Tittle}from\"../subscribeUser/subsStyled\";import VerificaLogin from\"../verificaLogin\";import{Botoes,Buttons,ButtonSub}from\"./dashboardStyled\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(props){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),viagens=_useState2[0],setViagens=_useState2[1];VerificaLogin();//Fazer uma função que ao clicar vai receber o id\n//e vamos guardar no local stody\nvar recebeId=function recebeId(id){console.log('guardei o id',id);localStorage.setItem('id',id);};//DESLOGAR O USUÁRIO\nvar deslogar=function deslogar(){localStorage.clear();history.push('/login');};//MOSTRAR AS VIAGENS EXISTENTES\nvar getViagens=function getViagens(){axios.get(urlViagem).then(function(res){setViagens(res.data.trips);}).catch(function(err){console.log('Eu sou o erro');});};var deleteViagens=function deleteViagens(id){axios.delete(\"\".concat(urlViagem,\"/\").concat(id),{headers:{auth:localStorage.getItem('token')}}).then(function(res){console.log(res.data);}).catch(function(err){console.log('Não funcionei dashboard delete',err.response);});};useEffect(function(){getViagens();},[getViagens()]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Botoes,{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Buttons,{children:\"Voltar ao home\"})}),/*#__PURE__*/_jsx(Link,{to:\"/create-trip\",children:/*#__PURE__*/_jsx(Buttons,{children:\"Criar viagem\"})}),/*#__PURE__*/_jsx(Buttons,{onClick:deslogar,children:\"Fazer logout\"})]}),/*#__PURE__*/_jsx(Tittle,{children:\"Lista de viagens\"}),/*#__PURE__*/_jsx(Container,{children:viagens.map(function(dados){return/*#__PURE__*/_jsxs(ContainerCard,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Nome: \",dados.name]}),/*#__PURE__*/_jsx(Link,{to:\"/detail-trip\",children:/*#__PURE__*/_jsx(ButtonSub,{onClick:function onClick(){return recebeId(dados.id);},children:\"INFO\"})}),/*#__PURE__*/_jsx(ButtonSub,{onClick:function onClick(){return deleteViagens(dados.id);},children:\"REMOVER\"})]},dados.id);})})]});}","map":{"version":3,"sources":["/home/andreyna/moreira-Andreyna-Carvalho/modulo3/projeto-labex/src/pages/dashboard/dashboard.js"],"names":["axios","React","useEffect","useState","Link","useHistory","urlViagem","Container","ContainerCard","Tittle","VerificaLogin","Botoes","Buttons","ButtonSub","Dashboard","props","history","viagens","setViagens","recebeId","id","console","log","localStorage","setItem","deslogar","clear","push","getViagens","get","then","res","data","trips","catch","err","deleteViagens","delete","headers","auth","getItem","response","map","dados","name"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { urlViagem } from \"../../components/url/urls\";\nimport { Container, ContainerCard } from \"../allTrip/AllTripStyled\";\nimport { Tittle } from \"../subscribeUser/subsStyled\";\nimport VerificaLogin from \"../verificaLogin\";\nimport { Botoes, Buttons, ButtonSub } from \"./dashboardStyled\";\n\nexport default function Dashboard(props){\n  const history = useHistory();\n  const [ viagens, setViagens ] = useState([]);\n\n  VerificaLogin();\n\n  //Fazer uma função que ao clicar vai receber o id\n  //e vamos guardar no local stody\n  const recebeId = (id) => {\n    console.log('guardei o id',id);\n    localStorage.setItem('id', id)\n  }\n\n  //DESLOGAR O USUÁRIO\n  const deslogar = () => {\n    localStorage.clear()\n    history.push('/login')\n  }\n\n  //MOSTRAR AS VIAGENS EXISTENTES\n\tconst getViagens = () => {\n\t\taxios\n\t\t\t.get(urlViagem)\n\t\t\t.then((res) => {\n\t\t\t\tsetViagens(res.data.trips);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log('Eu sou o erro');\n\t\t\t});\n\t};\n  const deleteViagens = (id) => {\n    axios.delete(`${urlViagem}/${id}`,{\n      headers: {\n        auth: localStorage.getItem('token')\n      }\n    })\n\t\t\t.then((res) => {\n        console.log(res.data);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log('Não funcionei dashboard delete', err.response);\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tgetViagens();\n\n\t}, [getViagens()]);\n\n  return (\n    <div>\n      <Botoes>\n      <Link to=\"/\"><Buttons>Voltar ao home</Buttons></Link>\n        <Link to=\"/create-trip\"><Buttons>Criar viagem</Buttons></Link>\n        <Buttons onClick={deslogar}>Fazer logout</Buttons>\n      </Botoes>\n      <Tittle>Lista de viagens</Tittle>\n\t\t\t<Container>\n\t\t\t\t{viagens.map((dados) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ContainerCard key={dados.id}>\n\t\t\t\t\t\t\t<h1>Nome: {dados.name}</h1>\n              <Link to=\"/detail-trip\"><ButtonSub onClick={() => recebeId(dados.id)}>INFO</ButtonSub></Link>\n              <ButtonSub onClick={() => deleteViagens(dados.id)}>REMOVER</ButtonSub>\n\t\t\t\t\t\t</ContainerCard>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Container>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}